<tool id="MIRNA" name="miRNASelection" version="17.09">
    <!-- <description>selects promising miRNA candidates</description> -->

    <command detect_errors="exit_code"><![CDATA[
		bash ${__tool_directory__}/scripts/twoMethods.sh
            --curpath ${__tool_directory__}
			--fasta $fastafile
            --txtfile $txtfile
            --mergefile $mergefile
            --expfile $expfile
            --outcorr $outcorr
            --outfile $outfile
            --outtardata $outtardata
            --outexp $outexp

    ]]></command>

    <inputs>
        <param name="mergefile" type="data" format="tsv" label="Input MIRNA and miRNAs annotation generated by miRNATranslate" />
        <param name="fastafile" type="data" format="fasta" label="Input collapsed fasta generated by miRNAPredict"
            help=""/>
        <param name="txtfile" type="data" format="tsv" label="Input alignment generated by miRNAPredict"
            help="" />
        <param name="expfile" type="data" format="tar" label="Input the expression generated by miRNAPredict" />

        <section name="Parameters of high-throughput criteria" expanded="true">
            <param name="stemloop" type="text" value="300" label="Foldback size" />
            <param name="structure" type="boolean" truevalue="yes" falsevalue="no" checked="false" label="structure in miRNA:miRNA*" />
            <param name="abias" type="float" value="0.75" min="0.1" max="1.0" label="Abundance bias" />
            <param name="sbias" type="float" value="0.90" min="0.1" max="1.0" label="Set the alignment number per read" />
            <param name="minlen" type="integer" value="20" min="18" max="26" label="Minimal miRNA length" />
            <param name="maxlen" type="integer" value="24" min="18" max="26" label="Maximum miRNA length" />
        </section>

    </inputs>

    <stdio><exit_code range="1:" level="fatal" description="Error Running build genome index"/></stdio>

    <outputs>
        <data name="outfile" format="tsv" label="Annotation file of miRNAs"></data>
        <data name="outtardata" format="tar" label="Related data for miRNACuration"></data>
        <data name="outcorr" format="tsv" label="Relationship between mature miRNAs and their precursors "></data>
        <data name="outexp" format="tsv" label="Expression of miRNA precursors"></data>
    </outputs>

<help><![CDATA[

.. class:: donemark

**What it does**

This tool provided two strategies to select high-quality miRNA candidates:

    i) high-throughput criteria 
    ii) ML-based approach.

.. class:: infomark

**Inputs**

- **MIRNA and miRNAs annotation file:** The miRNA information in tab-separated values (TSV) file.
- **Collapsed fasta:** The sequences and abundance file looks like the following example:

    |  >Seq1 434608.3
    |  TGACAGAAGAGAGTGAGCAC
    |  >Seq2 95573.3
    |  TTGACAGAAGATAGAGAGCAC
    |  >Seq3 35292.8
    |  TCGGACCAGGCTTCATTCCCC
    |  >Seq4 21074.87
    |  TGACAGAAGATAGAGAGCAC

- **Alignment file:** The results of whole genome sequence alignment looks like the following example:

    | Seq1	4	15415491	15415510	-	434608.3	-
    | Seq1	2	10676534	10676553	-	434608.3	-
    | Seq2	1	24921104	24921124	+	95573.3	-
    | Seq2	3	6244673	6244693	-	95573.3	-
    | Seq2	1	24913276	24913296	-	95573.3	-
    | Seq3	2	19176241	19176261	+	35292.8	-
    | Seq3	5	2838737	2838757	+	35292.8	-

- **The expression file:** A compressed folder containing the expression levels of sequences in each library.
- **The detailed parameters of high-throughput criteria and machine learning-based approach**

.. class:: infomark

**Output**

 The annotation file containing the information of pre-miRNAs and mature miRNAs and the classification results of high-throughput criteria and/or machine learning-based approach.

|

    ]]></help>

    <citations>
        <citation type="doi">10.1105/tpc.17.00851</citation>
        <citation type="doi">10.1371/journal.pone.0142753</citation>
        <citation type="doi">10.1186/s12859-014-0423-x</citation>
    </citations>

</tool>
